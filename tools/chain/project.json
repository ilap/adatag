{
  "name": "chain",
  "$schema": "../../node_modules/nx/schemas/project-schema.json",
  "sourceRoot": "tools/chain/",
  "projectType": "library",
  "implicitDependencies": [
    "aiken"
  ],
  "targets": {
    "spin-up": {
      "executor": "nx:run-commands",
      "options": {
        "parallel": false,
        "color": true,
        "cwd": "tools/chain",
        "env": {
          "YACI_CLI_CMD": "java -jar yaci-cli.jar 'create-node -o 1 --start'"
        }
      },
      "configurations": {
        "int": {
          "cache": false,
          "commands": [
            //"docker-compose --env-file env kill ",
            "docker compose --env-file env up --wait --wait-timeout 30",
            "bun run scripts/waitfor_ogmios.ts \"http://localhost:1442/health\" 60"
          ]
        },
        "dev": { "command": "echo 'No spin-up is required'"},
        "prd": {"command": "echo 'No spin-up is required'"}
      },
      "defaultConfiguration": "int"
    },
    "tear-down": {
      "executor": "nx:run-commands",
      "options": {
        "cwd": "tools/chain",
        "color": true
      },
      "configurations": {
        "int": {
          "command": "docker-compose --env-file env kill"
        },
        "dev": {},
        "prd": {}
      },
      "defaultConfiguration": "dev"
    },
    "test": {
      // "executor": "nx:run-commands",
      "executor": "@nx-bun/nx:test",
      "options": {
        "cwd": "tools/chain"
      },
      "configurations": {
        "int": {
          "command": "echo CHAIN INT"
        },
        "dev": {
          "command": "echo  CHAIN DEV"
        },
        "prd": {
          "command": "echo CHAIN PRD"
        }
      },
      "defaultConfiguration": "int"
    }
  }
}